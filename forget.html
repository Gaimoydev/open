<html><head>
  <meta charset="utf-8">
  <title>二开二开UI</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <link rel="stylesheet" href="layui/css/layui.css" media="all">
  
<link id="layuicss-layer" rel="stylesheet" href="https://aapi.www.cdnfly2025.top/cdnfly/css/layer.css?v=3.1.1" media="all"><style type="text/css">@font-face { font-family: TencentSans; src: url("moz-extension://2b932000-19c4-4c09-bce0-757bc36bb518/static/fonts/TencentSans.woff2"); }</style><link id="layuicss-layuiAdmin" rel="stylesheet" href="../src/style/admin.css?v=1.2.1 pro-1" media="all"></head>
<body layadmin-themealias="default" class="layui-layout-body">
  <div id="LAY_app" class="layadmin-tabspage-none"><script type="text/html" template="">
    <link rel="stylesheet" href="{{ layui.setter.base }}style/login.css?v={{ layui.admin.v }}-1" media="all">
  </script> <link rel="stylesheet" href="../src/style/login.css?v=1.2.1 pro-1" media="all"> <style>
      html,body{
          background:#fcfcff;
          padding:0 30px;
      }
      .layadmin-user-login{
          padding:0 
      }
      .layadmin-user-login-header{
          position: relative;
          margin-top:-100px;
      }
      .layadmin-user-login-header h1{
          color:black;
          font-weight:700;
          text-align: left;
          font-size:3em;
          position: absolute;
          z-index:2;
      }
      .layadmin-user-login-header::before {
          content: '';
          position: absolute;
          top: 15%;
          left: 0;
          width: 280px;
          height: 100px;
          background: linear-gradient(to right, #009688, #c471ed, #f64f59);
          z-index: 1;
          filter: blur(70px);
      }
      .layadmin-user-login-main{
          max-width: 1000px;  display: flex;
          align-items: center;
          justify-content: center;
          height: 100vh;
          width:100%;
      }
      .layadmin-user-login-main input{
          font: inherit;
          font-size: 14px;
          width: 100%;
          border: 0;
          outline: 0;
          padding: 0 20px;
          height:60px;
          line-height:60px;
          border-radius: 10px;
          box-sizing: border-box;
          background: #f2f4ff;
          margin-top: 1.6em;
      }
      .layadmin-user-login-main #reset_pwd {
          font-weight: 700;
          color: #fff;
          background-color:#009688;
          box-shadow: #009688 0 20px 30px -10px;
          cursor: pointer;
          transition: box-shadow .3s;
          height:60px;
          line-height:60px;
          border-radius: 10px;
          margin-top:20px;
      }
      .layadmin-user-login-icon{
          line-height:60px;    
      }
      .layadmin-link{
          color:#009688!important;
      }
      .layadmin-user-login-other{
          padding-top:0;    
      }
      .layui-form-item{
          margin-bottom:10px;
      }
      .layui-btn{
          height:60px;
          line-height: 60px;
          border-radius: 10px;
      }
      .layui-tab-brief>.layui-tab-title .layui-this{color:#009688}
      .layui-tab-brief>.layui-tab-more li.layui-this:after, .layui-tab-brief>.layui-tab-title .layui-this:after{border-bottom:2px solid #009688}
      /*下面是针对手机版样式*/
      @media screen and (max-width: 768px) {
          html,body{padding:0}
          .layadmin-user-login-main{width:100%}
          .layadmin-user-login-main{display:block}
          .layadmin-user-login-header{padding-top:100px;height:40vh}
          .layadmin-user-login-header h1{top:20vh}
          .layadmin-user-login-header::before{top:30%}
          .layadmin-user-login-box{padding:0 40px}
          .layadmin-user-login-main{height:auto}
      }
  
  </style><div class="layadmin-user-login layadmin-user-display-show" id="LAY-user-login" style="display: none;">
    <div class="layadmin-user-login-main">
      <div class="layadmin-user-login-box layadmin-user-login-header layui-col-xs12 layui-col-md6">
         <h1>找回密码</h1>
      </div>
      <div class="layadmin-user-login-box layadmin-user-login-body layui-form layui-col-xs12 layui-col-md6">
        <div class="layui-tab layui-tab-brief" lay-filter="forget-pass-tab">
          <ul class="layui-tab-title">
            <li data-type="email" class="layui-this">用邮箱重置</li>
            <li data-type="phone" class="">用手机重置</li>
          </ul>
        </div>      
  
        <div class="layui-form-item email">
          <label class="layadmin-user-login-icon layui-icon layui-icon-email" for="LAY-user-login-email"></label>
          <input type="text" name="email" id="LAY-user-login-email" placeholder="请输入邮箱" class="layui-input">
        </div>
        <div class="layui-form-item email">
          <div class="layui-row">
            <div class="layui-col-xs7" style="margin-top:1.2em">
              <label class="layadmin-user-login-icon layui-icon layui-icon-vercode" for="LAY-user-login-smscode"></label>
              <input type="text" name="captcha" id="LAY-user-login-smscode" placeholder="邮箱验证码" class="layui-input" style="margin-top:0">
            </div>
            <div class="layui-col-xs5" style="margin-top:1.2em">
              <div style="margin-left: 10px;">
                <button type="button" class="layui-btn layui-btn-primary layui-btn-fluid" id="LAY-user-forget-getsmscode">获取验证码</button>
              </div>
            </div>
          </div>
        </div>
  
        <div class="layui-form-item phone layui-hide">
          <label class="layadmin-user-login-icon layui-icon layui-icon-cellphone" for="LAY-user-login-cellphone"></label>
          <input type="text" name="phone" id="LAY-user-login-cellphone" placeholder="手机号码" class="layui-input">
        </div>
  
        <div class="layui-form-item phone layui-hide">
          <div class="layui-row">
            <div class="layui-col-xs7" style="margin-top:1.2em">
              <label class="layadmin-user-login-icon layui-icon layui-icon-vercode" for="LAY-user-login-vercode"></label>
              <input type="text" name="phone_captcha" placeholder="短信验证码" class="layui-input" style="margin-top:0">
            </div>
            <div class="layui-col-xs5" style="margin-top:1.2em">
              <div style="margin-left: 10px;">
                <button type="button" class="layui-btn layui-btn-primary layui-btn-fluid" id="LAY-user-reg-getsmscode-phone">获取验证码</button>
              </div>
            </div>
          </div>
        </div>
  
        <div class="layui-form-item">
          <label class="layadmin-user-login-icon layui-icon layui-icon-password" for="LAY-user-login-password"></label>
          <input type="password" name="password" id="LAY-user-login-password" placeholder="新密码" class="layui-input">
        </div>
        <div class="layui-form-item">
          <label class="layadmin-user-login-icon layui-icon layui-icon-password" for="LAY-user-login-repass"></label>
          <input type="password" name="repass" id="LAY-user-login-repass" placeholder="确认密码" class="layui-input">
        </div>
        <div class="layui-form-item">
          <button class="layui-btn layui-btn-fluid" id="reset_pwd" lay-submit="" lay-filter="LAY-user-forget-resetpass">重置新密码</button>
        </div>
  
        <div class="layui-trans layui-form-item layadmin-user-login-other">
  
          <a lay-href="/user/login" class="layadmin-user-jump-change layadmin-link">用已有帐号登入</a>
          <a lay-href="/user/reg" class="layadmin-user-jump-change layadmin-link">注册帐号</a>
        </div>
  
      </div>
    </div>
  
  
  </div><script>
  function refresh_img(ele) {
    ele.src = '/common/captcha?t='+ new Date().getTime()
  }
  
  function wait_60s () {
    $ = layui.$
    window.second_total = window.second_total - 1
    $("#LAY-user-reg-getsmscode-phone").text(window.second_total+"秒后可重发")
    if (window.second_total <= 0) {
      $("#LAY-user-reg-getsmscode-phone").text("获取手机验证码")
      $("#LAY-user-reg-getsmscode-phone").removeClass("layui-btn-disabled")
      clearInterval(window.count_down_interval)
    }
  }
  
  function send_sms(ele) {
    $ = layui.$
    admin = layui.admin
  
    var code = $(ele).val()
    if (code.length == 4) {
      var phone = $("#LAY-user-login-cellphone").val()
  
      // 发送短信
      admin.req({
        url: '/phone-captcha' //实际使用请改成服务端真实接口
        ,data: JSON.stringify({"phone": phone,"check_exist":1,"code":code})
        ,type: "post"
        ,fail: fail
        ,contentType:"application/json"
        ,dataType: "json"
        ,done: function(res){
          var code = res.code
          if (code == 0) {
            window.second_total = 60
            $("#LAY-user-reg-getsmscode-phone").addClass("layui-btn-disabled")
            window.count_down_interval = setInterval('wait_60s()', 1000);
            layer.closeAll();
            layer.msg("验证码已发送到您的手机，请收到后输入继续")
          }
        }
      });
  
    }
  
    function fail (argument) {
      $(".captcha-img").click()
    }
  }  
  
  layui.use(['admin', 'form', 'user','element'], function(){
    var $ = layui.$
    ,setter = layui.setter
    ,admin = layui.admin
    ,form = layui.form
    ,element = layui.element
    ,router = layui.router();
  
    form.render();
    
    //一些事件监听
    element.on('tab(forget-pass-tab)', function(data){
      if (data.index == 0) {
        $(".email").removeClass("layui-hide")
        $(".phone").addClass("layui-hide")
      } else {
        $(".email").addClass("layui-hide")
        $(".phone").removeClass("layui-hide")
      }
    });
  
    var set_title = function (argument) {
      var sys_name = layui.data('layuiAdmin').sys_name
      $("title").text(sys_name+"系统重置密码")
      $("h2").text(sys_name+"系统重置密码")
    }
  
    // 获取系统信息
    admin.get_sys_info(set_title)
  
    // 获取短信，弹出图形验证码
    $("#LAY-user-reg-getsmscode-phone").click(function function_name (argument) {
      var phone = $("#LAY-user-login-cellphone").val()
      if (phone == "") {
        layer.alert("请输入手机号")
        return
      }
  
      layer.open({
        type: 1,
        title: false,
        closeBtn: 0,
        shadeClose: true,
        skin: 'yourClass',
        content: '<div class="layui-form-item"><img onclick="refresh_img(this)" class="captcha-img" style="cursor: pointer;margin:-5px 10px 0px 20px;width:100px;float:left;" src="/common/captcha"><input oninput="send_sms(this)" style="margin:15px 20px 0px 0px;width:200px;" type="text" name="code" autocomplete="off"  placeholder="输入验证码获取手机短信"  class="layui-input"></div>'
      });
  
      $("input[name='code']").focus()
    })
  
    //发送短信验证码
    $("#LAY-user-forget-getsmscode").click(function (argument) {
      var email = $("input[name='email']").val()
      var data = {"email":email,"check_exist":1}
      admin.req({
        url: '/email-captcha' //实际使用请改成服务端真实接口
        ,type: "post"
        ,data: JSON.stringify(data)
        ,contentType:"application/json"
        ,dataType: "json"        
        ,done: function(res){
          layer.msg('验证码已发送至你的邮箱，请注意查收', {
            offset: '15px'
            ,icon: 1
            ,time: 1000
          });
        }
      });    
    })
    
    //重置密码
    form.on('submit(LAY-user-forget-resetpass)', function(obj){
      var field = obj.field;
      
      //确认密码
      if(field.password !== field.repass){
        return layer.msg('两次密码输入不一致');
      }
  
      var reset_by = $(".layui-tab-title").find(".layui-this").data("type")
  
      var data = {"reset_by":reset_by, "email":field.email,"phone":field.phone, "captcha":field.captcha, "phone_captcha":field.phone_captcha, "password":field.password}
      //请求接口
      admin.req({
        url: '/reset-pass' //实际使用请改成服务端真实接口
        ,type: "post"
        ,data: JSON.stringify(data)
        ,contentType:"application/json"
        ,dataType: "json"        
        ,done: function(res){
          layer.msg('重置成功', {
            offset: '15px'
            ,icon: 1
            ,time: 1000
          },function (argument) {
            location.href = "/console/index.html#/user/login"
          });
        }
      }); 
      
      return false;
    });
    
  });
  </script>